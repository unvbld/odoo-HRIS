### HRIS REST API Test Collection
### Use this file with VS Code REST Client extension

@baseUrl = http://localhost:8069
@username = apitest@test.com
@password = test123

### 1. Health Check - Test API availability
GET {{baseUrl}}/api/health

### 2. Login - Get session token
# @name login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
    "username": "{{username}}",
    "password": "{{password}}"
}

### 3. Extract session token from login response
@sessionToken = {{login.response.body.data.session_token}}

### 4. Get Profile - Test authenticated endpoint
GET {{baseUrl}}/api/auth/profile
Cookie: session_id={{sessionToken}}

### 5. Get Employees - Test employees endpoint
GET {{baseUrl}}/api/employees?limit=10
Cookie: session_id={{sessionToken}}

### 6. Get Specific Employee
GET {{baseUrl}}/api/employees/1
Cookie: session_id={{sessionToken}}

### 7. Get Departments
GET {{baseUrl}}/api/departments
Cookie: session_id={{sessionToken}}

### 8. Logout - Clear session
POST {{baseUrl}}/api/auth/logout
Cookie: session_id={{sessionToken}}

###
### LEAVE MANAGEMENT ENDPOINTS
###

### Get Leave Types
GET {{baseUrl}}/api/leave-types
Cookie: session_id={{sessionToken}}

### Get Leave Requests
GET {{baseUrl}}/api/leaves?limit=10
Cookie: session_id={{sessionToken}}

### Create Leave Request
POST http://localhost:8069/api/leaves
Content-Type: application/json
Cookie: session_id=YOUR_SESSION_ID

{
    "employee_id": 1,
    "holiday_status_id": 1,
    "request_date_from": "2025-07-01",
    "request_date_to": "2025-07-05",
    "name": "Summer Vacation",
    "notes": "Family vacation"
}

### Get Leave Balance
GET http://localhost:8069/api/leave-balance/1
Cookie: session_id=YOUR_SESSION_ID

###

### Check Attendance Status
GET http://localhost:8069/api/attendance/status/1
Cookie: session_id=YOUR_SESSION_ID

### Check-in
POST http://localhost:8069/api/attendance/checkin
Content-Type: application/json
Cookie: session_id=YOUR_SESSION_ID

{
    "employee_id": 1,
    "location": "Office",
    "notes": "On time"
}

### Check-out
POST http://localhost:8069/api/attendance/checkout
Content-Type: application/json
Cookie: session_id=YOUR_SESSION_ID

{
    "employee_id": 1,
    "location": "Office",
    "notes": "End of day"
}

### Get Attendance Records
GET http://localhost:8069/api/attendance?employee_id=1&limit=10
Cookie: session_id=YOUR_SESSION_ID
